<!DOCTYPE html>
<html>
    <head>
        {% load static %}
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Registro</title>
        <link rel="stylesheet" href="{% static 'mascota/css/bootstrap.min.css' %}" >
        <script src="{% static 'mascota/js/bootstrap.min.js' %}"></script>
        <link rel="stylesheet" href="{% static 'mascota/css/style.css' %}"> 
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        
    </head>
    <body>
            <nav class="navbar navbar-dark bg-dark ">
                <div class="container-fluid">
                  <a class="navbar-brand" href="">MI MASCOTA FELIZ</a>
                  <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">
                    <div class="offcanvas-header">
                      <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">MENU PRINCIPAL</h5>
                      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                      <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                        <li class="nav-item">
                          <a class="nav-link "  href="{% url 'index' %}">INICIO</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link active" aria-current="page" href="{% url 'registro' %}">REGISTRASE</a>
                        </li>
                         <li class="nav-item">
                            <a class="nav-link" href="{% url 'ventas' %}">ENTRAR COMO INVITADO</a>
                          </li>
                      </ul> 
                    </div>
                  </div>
                </div>
                <header class="container-fluid bg-primary d-flex justify-content-center" id="titu">
                    <p class="text-light mb-0 p-2 fs-6">REGISTRATE EN MI MASCOTA FELIZ</p>
                  </header>
              </nav>
              <div class="container form-container">
                <div class="form-box">
                    <img src="{% static 'mascota/img/qqq.jpg' %}" width="80px" height="80px">
                    <div class="form-content">
                        <h2 class="text-center mb-4">Formulario de Registro</h2>
                        <form class="needs-validation"  name="registro" method="post" novalidate>
                            {% csrf_token %}
                            <div class="mb-3">
                                <label for="gmail" class="form-label">Gmail</label>
                                <input type="email" class="form-control" id="gmail" name="gmail" required>
                                <div class="invalid-feedback">
                                    Por favor ingresa un Gmail válido.
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="nombre" class="form-label">Nombre</label>
                                <input type="text" class="form-control" id="nombre" name="nombre" pattern="[A-Za-zÁáÉéÍíÓóÚúÑñ\s]+"  required>
                                <div class="invalid-feedback">
                                    Por favor ingresa tu nombre.
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="apellido" class="form-label">Apellido</label>
                                <input type="text" class="form-control" id="apellido" name="apellido"  required>
                                <div class="invalid-feedback">
                                    Por favor ingresa tu apellido.
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="direccion" class="form-label">Dirección</label>
                                <input type="text" class="form-control" id="direccion" name="direccion" minlength="6"  required>
                                <div class="invalid-feedback">
                                    Por favor ingresa tu dirección.
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="password" class="form-label">Contraseña</label>
                                <input type="password" class="form-control" id="password" name="password"  required minlength="6">
                                <div class="invalid-feedback">
                                    La contraseña debe tener al menos 6 caracteres.
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for=" " class="form-label">Género</label>
                                <select name="sexo" id="sexo" class="form-control" required>
                                    <option value="">Seleccione...</option>
                                    {% for genero in generos %}
                                        <option value="{{ genero.id_genero }}">{{ genero.genero }}</option>
                                    {% endfor %}
                                </select>
                                <div class="invalid-feedback">
                                    Por favor seleccione un género.
                                </div>
                            </div>
                            <button name="opcion" class="btn btn-primary" type="submit" value="agregar">Registrarse</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="registro" tabindex="-1" aria-labelledby="registro" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="registro">Registro exitoso</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div>
                            <p>Ya puedes utilizar tu cuenta, gracias por registrarte.</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        </div>
                    </div>
                </div>
            </div>
            
    </body>
    <script>
        // Validar formulario
        (function () {
            'use strict';
            window.addEventListener('load', function () {
                var forms = document.getElementsByClassName('needs-validation');
                Array.prototype.filter.call(forms, function (form) {
                    form.addEventListener('submit', function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        } else {
                            event.preventDefault(); // Evita el envío del formulario
                            $('#registro').modal('show'); // Muestra el modal
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();
    </script>
</html>